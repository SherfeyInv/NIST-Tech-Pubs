Steps to adding records to TechPubs2HTML

1. Get list of DOIs deposited since you last added to allrecords XML file. Few ways to get DOIs:

	(a) - easier if just doing the past few days
	Sign into CrossRef admin
	Go here: https://doi.crossref.org/servlet/submissionAdmin
	Enter date range into "Recieved Date" start/end fields
	Click on the submission IDs to get the submitted DOI information (either in the Message box or you can click on the 			
	content link to see what was submitted)

	(b) - easier if a date range that is longer than 1 week
	Get JSON from CrossRef API HTTP query: https://api.crossref.org/prefixes/10.6028/works?filter=type:report,from-deposit-		date:YYYY-MM-DD
	convert JSON to XML (https://www.freeformatter.com/json-to-xml-converter.html)
	Save XML file as DOILIST-from-deposit-date:YYYY-MM-DD-to-YYY-MM-DD.XML	
	Run the DOIList Transform on the file to get a text list

2. Add DOIs to the DOI List: DOI List MASTER.txt (CTRL+F to see if DOI is already on list before adding)


3. Use list of DOIs to submit a DOI query to CrossRef to get a UNIXSD XML file
	Sign in to CrossRed admin
	Go here: https://doi.crossref.org/servlet/submissionAdmin?sf=doiQuery
	Paste in DOIs
	Choose format UNIXSD
	Hit Submit

3. Make sure the TechPubs2HTML OXYGEN Project is Open

4. Save results from #3 to a new allrecords.xml file in OXYGEN (replace the one already there)

5. Delete everything before the <body> element; don't forget to delete the end as well   </query_result>
</crossref_result>

6. Do a Find and Delete (or Find/replace with nothing) of this entire element:        

	<crossref xmlns="http://www.crossref.org/xschema/1.1" xsi:schemaLocation="http://www.crossref.org/xschema/1.1 	http://doi.crossref.org/schemas/unixref1.1.xsd">
	Don't forget to delete the end as well: </crossref>

7. Run the AllRecords2QueryKey transformation scenario to fill in the blank query key attribute with the series abbreviation.

8. CTRL+F for query key="" ; theere should be 1 record that is still blank, fill it in with TN (an old TN was given a generic DOI becuase it was a duplicate pub number).

9. Run the AllRecords2TextStep1 transformation to remove all extra line breaks

10. Run the AllRecords2HTML transformation scenario to get the updated HTML page

11. Run the AllRecords2Text transformation to get the .txt file

12. Open the txt file in Excel; choose delimiated; UTF-8; | as the separator

13. Use last updated date in Excel file to capture all new URLs and add them to the uniqueURLs table in the NVL stats folder.


